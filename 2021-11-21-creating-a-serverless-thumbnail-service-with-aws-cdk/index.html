<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.ea450a1f2307ecada1c4.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css?family=Muli:400,400i,600,700,700i,800&display=swap);@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-4124805c0503dbfe42dd67d7f5715964.woff2) format("woff2"),url(/static/montserrat-latin-100-c8fb2f714bbc7bc3e8dfffa916b286dc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e4bf47bd171a9b2a72dd84c58bf90edf.woff2) format("woff2"),url(/static/montserrat-latin-100italic-d1f3f2d02ee4d7d2d4b1ad865014f189.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-444ae007121264bc1969d49b4031f9b2.woff2) format("woff2"),url(/static/montserrat-latin-200-edbce16a90aa22c297a0307b85789837.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-f316c5d1ec40f3e68654c3f38b3999f3.woff2) format("woff2"),url(/static/montserrat-latin-200italic-d7bbb730d9b5e11720b3eb32326dcca7.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-0a7c6df06e85d978d096d4d18fd8d43d.woff2) format("woff2"),url(/static/montserrat-latin-300-5e86df2cad22d2ef2b03516334afae5e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-c076c4892bc7a4be7b9097e97a35012d.woff2) format("woff2"),url(/static/montserrat-latin-300italic-37c74a8d2d0d36a0a2c6e9a37ee15b0c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-501ce09c42716a2f6e1503a25eb174c9.woff2) format("woff2"),url(/static/montserrat-latin-400-f29d2b8559699b6beb5b29b25b8bc572.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-882908d9950d9c86ebd380877f293d95.woff2) format("woff2"),url(/static/montserrat-latin-400italic-22e7b04e5f2a901d49d4d342315a715a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-f0f2716c5fe401d175b88715e7d28685.woff2) format("woff2"),url(/static/montserrat-latin-500-991b453bf90a0980e78966d2af7e3d3a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-4590ebba421b3288c305305d7fa7b504.woff2) format("woff2"),url(/static/montserrat-latin-500italic-f3d41e4cdcc2314e49ddcea751d6f87f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-15c24f7109941777774ddd2c636c6a50.woff2) format("woff2"),url(/static/montserrat-latin-600-f6dc6096f48956908c1787d9a722570a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-6d10b80529d5c36c7c09fca7193af0fc.woff2) format("woff2"),url(/static/montserrat-latin-600italic-02c4833312d94b1b0866f073023a250e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-79982cd1f74c6fa7451bf9b37ead09ff.woff2) format("woff2"),url(/static/montserrat-latin-700-957e93fbbe131a59791cd820d98b7109.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-283438e9577fe6a684466bb100e105ec.woff2) format("woff2"),url(/static/montserrat-latin-700italic-ca627c5ccc65cf80c2ecaea44b997de9.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-35386154b78d046218fc8f88a44ff515.woff2) format("woff2"),url(/static/montserrat-latin-800-756655905d91b77960888262e7d58d35.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-e1b52a7bd83e2324db6d92bdc206844c.woff2) format("woff2"),url(/static/montserrat-latin-800italic-a69f0add9d86c1a84311d7dd8693ba4a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-260c2ea3ef57feb82251952e605a36d5.woff2) format("woff2"),url(/static/montserrat-latin-900-186cae8091da578150d81958e217714a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-d785fb9fc74588ffb7f306799709a97d.woff2) format("woff2"),url(/static/montserrat-latin-900italic-43b527fe77254f97ea36e2b54e845ec4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:200;src:local("Nunito Extra Light "),local("Nunito-Extra Light"),url(/static/nunito-latin-200-2a4f4b0a3646be9d8560178ebc4306e5.woff2) format("woff2"),url(/static/nunito-latin-200-249c20ee4450b15795cdde4cbb5f38d8.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:200;src:local("Nunito Extra Light italic"),local("Nunito-Extra Lightitalic"),url(/static/nunito-latin-200italic-89ba5530f3b2c751f2a49e25f31e3f15.woff2) format("woff2"),url(/static/nunito-latin-200italic-67d3d63c0ac28ccbc0c0fcbda8e66e04.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:300;src:local("Nunito Light "),local("Nunito-Light"),url(/static/nunito-latin-300-895205e22ad7d4d866df7102352077cd.woff2) format("woff2"),url(/static/nunito-latin-300-cad1324b066f52f764cf080d9244c8b2.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:300;src:local("Nunito Light italic"),local("Nunito-Lightitalic"),url(/static/nunito-latin-300italic-f4a613c73f19da60cf08aa42b2a9249b.woff2) format("woff2"),url(/static/nunito-latin-300italic-1fde36925a8493f45651815dd89d22a7.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:400;src:local("Nunito Regular "),local("Nunito-Regular"),url(/static/nunito-latin-400-de6068bf97f40206af0b062e262e6213.woff2) format("woff2"),url(/static/nunito-latin-400-6386ba6af7b7a5480eb5efda82ff803c.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:400;src:local("Nunito Regular italic"),local("Nunito-Regularitalic"),url(/static/nunito-latin-400italic-6ca737afe5cef0c0a9c9bbfec4e398ff.woff2) format("woff2"),url(/static/nunito-latin-400italic-ef2e2a0d9dd85cf89526d1f27f8fbbef.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:600;src:local("Nunito SemiBold "),local("Nunito-SemiBold"),url(/static/nunito-latin-600-b10ecee279e3a8d11d5ec3193b68d8bf.woff2) format("woff2"),url(/static/nunito-latin-600-c3de23017bcb95715e6eb11dd6a10fc5.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:600;src:local("Nunito SemiBold italic"),local("Nunito-SemiBolditalic"),url(/static/nunito-latin-600italic-97d4f64b213f3e5163827754c213bb4e.woff2) format("woff2"),url(/static/nunito-latin-600italic-4f62b81ff327bd0ffadcb7b82e6c13b2.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:700;src:local("Nunito Bold "),local("Nunito-Bold"),url(/static/nunito-latin-700-91ae827aa880d02ea567979add1da58c.woff2) format("woff2"),url(/static/nunito-latin-700-623f5ed42b0b347fb4531ded4e4b57a2.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:700;src:local("Nunito Bold italic"),local("Nunito-Bolditalic"),url(/static/nunito-latin-700italic-b94caac4c88b1fe6c4faf6256646f42e.woff2) format("woff2"),url(/static/nunito-latin-700italic-3aabf345871453097c2d8762411d187e.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:800;src:local("Nunito ExtraBold "),local("Nunito-ExtraBold"),url(/static/nunito-latin-800-36e4c9b478c2e2adb339a76d819eed7e.woff2) format("woff2"),url(/static/nunito-latin-800-33c733aff58ea08126616f346cbf4f4a.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:800;src:local("Nunito ExtraBold italic"),local("Nunito-ExtraBolditalic"),url(/static/nunito-latin-800italic-0f20328772c0d84250ef397c129607fb.woff2) format("woff2"),url(/static/nunito-latin-800italic-672d2afe4f40a766e46ff95379550c4f.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:900;src:local("Nunito Black "),local("Nunito-Black"),url(/static/nunito-latin-900-b296e05d0932e16d500b753becdb338e.woff2) format("woff2"),url(/static/nunito-latin-900-cbf4339e858edf2b14d20140b2887343.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:900;src:local("Nunito Black italic"),local("Nunito-Blackitalic"),url(/static/nunito-latin-900italic-ae87e7b4e2d3825919b9bc6c82039b80.woff2) format("woff2"),url(/static/nunito-latin-900italic-602859bd469800c6205701f5a16b1a1b.woff) format("woff")}@font-face{font-family:Alegreya;font-style:normal;font-display:swap;font-weight:400;src:local("Alegreya Regular "),local("Alegreya-Regular"),url(/static/alegreya-latin-400-1bf2b206adf8f7b46ba5f3b357c38672.woff2) format("woff2"),url(/static/alegreya-latin-400-c86584ca67d3fd1db92b041bdade2d78.woff) format("woff")}@font-face{font-family:Alegreya;font-style:italic;font-display:swap;font-weight:400;src:local("Alegreya Regular italic"),local("Alegreya-Regularitalic"),url(/static/alegreya-latin-400italic-dd74c0c256a81a250d6e3886b9e576ff.woff2) format("woff2"),url(/static/alegreya-latin-400italic-a49f843b91685923c469edf47e389897.woff) format("woff")}@font-face{font-family:Alegreya;font-style:normal;font-display:swap;font-weight:500;src:local("Alegreya Medium "),local("Alegreya-Medium"),url(/static/alegreya-latin-500-38edb27697d76919c232e44a14f21805.woff2) format("woff2"),url(/static/alegreya-latin-500-d6e3582f71a17711906ef026116c4ab8.woff) format("woff")}@font-face{font-family:Alegreya;font-style:italic;font-display:swap;font-weight:500;src:local("Alegreya Medium italic"),local("Alegreya-Mediumitalic"),url(/static/alegreya-latin-500italic-69548089fb89e6b6703333635dc8fd80.woff2) format("woff2"),url(/static/alegreya-latin-500italic-4d6db4854825588a9c40fc5e38468f11.woff) format("woff")}@font-face{font-family:Alegreya;font-style:normal;font-display:swap;font-weight:700;src:local("Alegreya Bold "),local("Alegreya-Bold"),url(/static/alegreya-latin-700-91067660668c2a50e1aebb1217eb4f04.woff2) format("woff2"),url(/static/alegreya-latin-700-c5c37be8855af831b8fa6227b7ee3a5b.woff) format("woff")}@font-face{font-family:Alegreya;font-style:italic;font-display:swap;font-weight:700;src:local("Alegreya Bold italic"),local("Alegreya-Bolditalic"),url(/static/alegreya-latin-700italic-e70abe4ad4049340e81a8cf9695921af.woff2) format("woff2"),url(/static/alegreya-latin-700italic-073d22cc1d7520b69b85236f83161fa6.woff) format("woff")}@font-face{font-family:Alegreya;font-style:normal;font-display:swap;font-weight:800;src:local("Alegreya ExtraBold "),local("Alegreya-ExtraBold"),url(/static/alegreya-latin-800-39d285c315bdce1f4e7a58776c8acb9d.woff2) format("woff2"),url(/static/alegreya-latin-800-e8b0a8bf5d8f66816145e3f26d1ae9eb.woff) format("woff")}@font-face{font-family:Alegreya;font-style:italic;font-display:swap;font-weight:800;src:local("Alegreya ExtraBold italic"),local("Alegreya-ExtraBolditalic"),url(/static/alegreya-latin-800italic-ff56d77b0d1a8f985ddf77055665fe42.woff2) format("woff2"),url(/static/alegreya-latin-800italic-7c8d918914d7a37942de5b36ecc33308.woff) format("woff")}@font-face{font-family:Alegreya;font-style:normal;font-display:swap;font-weight:900;src:local("Alegreya Black "),local("Alegreya-Black"),url(/static/alegreya-latin-900-84778a160e316a689dbca4302865a6ac.woff2) format("woff2"),url(/static/alegreya-latin-900-69942dd6ac75dbf15630b9696f466052.woff) format("woff")}@font-face{font-family:Alegreya;font-style:italic;font-display:swap;font-weight:900;src:local("Alegreya Black italic"),local("Alegreya-Blackitalic"),url(/static/alegreya-latin-900italic-a503a455b9124bf279832270f597ff59.woff2) format("woff2"),url(/static/alegreya-latin-900italic-1acd008a03ab951841d9615bf7be9b36.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.header{font-weight:400;padding-bottom:0!important;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-transition:padding .5s ease 0s;transition:padding .5s ease 0s;border-bottom:1px solid #d9d9d9;height:50px;background-color:#f8f8f8;left:0;position:fixed;top:0;width:100%;z-index:1;padding:0 0 0 20px}.header,.logoType{-webkit-box-sizing:inherit;box-sizing:inherit;margin:0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex}.logoType{padding:0;text-decoration:none;text-align:left;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-negative:0;flex-shrink:0;width:auto}.menu{font-weight:400;-webkit-box-sizing:inherit;box-sizing:inherit;margin:0;-webkit-box-align:center;-ms-flex-align:center;align-items:center;top:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;left:0;max-height:50px;padding:0 10px;width:100%;z-index:1;border-top:none;background:transparent;display:-webkit-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-transition:none;transition:none}.logo{font-weight:400;color:#666;display:inline-block;border-radius:5px;border:1px solid #eee;-o-border-image:initial;border-image:initial;overflow:hidden;-webkit-transition:all .5s ease 0s;transition:all .5s ease 0s;margin:0 10px 0 0;height:36px;width:36px}.logo,.type{text-align:left;-webkit-box-direction:normal;-webkit-box-sizing:inherit;box-sizing:inherit;padding:0;-ms-flex-negative:0;flex-shrink:0}.type{margin:0;border:0;vertical-align:baseline;background-color:transparent;text-decoration:none;-webkit-transition:.4s ease;transition:.4s ease;display:block;color:#131313}.type h1{text-align:left;padding:0;margin:0 0 2px;font-size:1.7rem;font-weight:500;text-transform:uppercase;letter-spacing:.1rem}.logoType:hover{text-decoration:none}.itemList{font-weight:400;-webkit-box-sizing:inherit;box-sizing:inherit;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;list-style:none;margin:0;position:relative;width:100%;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding:0}.itemList .item:hover{color:#000;font-weight:900}.itemList .item:first-child{border-left:none}.itemList .item{font-weight:400;list-style:none;-webkit-box-sizing:inherit;box-sizing:inherit;margin:0;padding:0;background:transparent;-webkit-transition:all .5s;transition:all .5s;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.itemList .item .icons{height:3rem;border-left:1px solid #d9d9d9;padding-left:12px}.itemList .item img:hover{opacity:1}.itemList .item img{height:1.6rem;padding:0;margin:6px 10px 3px 0;opacity:.65}.itemList .item a svg{height:1.6rem;padding:0;margin:2px 6px 0 0}.itemList .item:first-child>a{border-left:none}.itemList .item>a{line-height:3rem;font-weight:400;list-style:none;-webkit-box-sizing:inherit;box-sizing:inherit;text-decoration:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;margin:10px 10px 10px 0;padding-left:10px;-webkit-transition:all 0s;transition:all 0s;border-radius:5px;border-left:1px solid #d9d9d9}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15}body{margin:0}main{display:block}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15}button,input{overflow:visible}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;white-space:normal}progress{vertical-align:baseline}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}

/*! normalize-opentype.css v0.2.4 | MIT License | kennethormandy.com/journal/normalize-opentype-css */::-moz-selection{color:inherit;text-shadow:inherit;background-color:#accef7}::selection{color:inherit;text-shadow:inherit;background-color:#accef7}body,html,table{-webkit-font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0,"dlig" 0;font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0,"dlig" 0}h1,h2,h3{-webkit-font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0,"dlig" 1;font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0,"dlig" 1}abbr{text-transform:uppercase;-webkit-font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0,"smcp" 1,"c2sc" 1;font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0,"smcp" 1,"c2sc" 1}time{-webkit-font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0;font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0}code,kbd,pre,samp{-webkit-font-feature-settings:"kern" 0,"liga" 0,"calt" 1,"dlig" 0,"pnum" 0,"tnum" 1,"onum" 0,"lnum" 1,"zero" 1;font-feature-settings:"kern" 0,"liga" 0,"calt" 1,"dlig" 0,"pnum" 0,"tnum" 1,"onum" 0,"lnum" 1,"zero" 1}sup{-webkit-font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0,"dlig" 0,"sups" 1;font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0,"dlig" 0,"sups" 1}sub{-webkit-font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0,"dlig" 0,"subs" 1;font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 1,"lnum" 0,"dlig" 0,"subs" 1}input[type=color],input[type=date],input[type=datetime-local],input[type=datetime],input[type=number],input[type=range],input[type=tel],input[type=week]{-webkit-font-feature-settings:"kern" 0,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 0,"lnum" 1,"zero" 0;font-feature-settings:"kern" 0,"liga" 1,"calt" 1,"pnum" 1,"tnum" 0,"onum" 0,"lnum" 1,"zero" 0}caption,tbody{-webkit-font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 0,"tnum" 1,"onum" 0,"lnum" 1,"zero" 1;font-feature-settings:"kern" 1,"liga" 1,"calt" 1,"pnum" 0,"tnum" 1,"onum" 0,"lnum" 1,"zero" 1}.post-content .kg-image{margin:auto;max-width:1024px}.post-content .post-content-body p code{font-style:normal;word-break:keep-all;font-size:1.5rem;background-color:#ededed}.post-content td,.post-content th{font-size:1.7rem}.post-content{padding:0!important}.gatsby-highlight .gatsby-highlight-code-line{min-height:1.44em;margin-right:0;display:block;background-color:#ededed;margin-left:-60px;padding-left:22px;border-left:40px solid #feb}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:inherit!important}@media (max-width:650px){.type{display:none}.post-content>.post-content-body>*,.post-content>header>*{min-width:100px!important}}.post-content>header>*{min-width:600px;max-width:600px;margin-left:auto;margin-right:auto;text-align:left}.post-content>header>h1{font-size:4.5rem;margin-bottom:15px}.post-content>.post-content-body>*{min-width:600px;max-width:600px;margin-left:auto;margin-right:auto;text-align:left}.post-content>.post-content-body .gatsby-resp-image-figure{max-width:1000px}.post-content>.post-content-body .gatsby-resp-iframe-wrapper{max-width:1000px;max-height:500px}.post-content>.post-content-body .gatsby-resp-image-figure figcaption:before{content:"Figure: ";font-style:italic}.post-content>.post-content-body .gatsby-resp-image-figure figcaption{font-style:italic;font-size:85%;margin-top:.7em;text-align:center}a,abbr,acronym,address,applet,article,aside,audio,big,blockquote,body,canvas,caption,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,ul,var,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}img{max-width:100%}html{-webkit-box-sizing:border-box;box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{-webkit-box-sizing:inherit;box-sizing:inherit}a{background-color:transparent}a:active,a:hover{outline:0}b,strong{font-weight:700}dfn,em,i{font-style:italic}h1{margin:.67em 0;font-size:2em}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}mark{background-color:#fdffb6}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit}button{overflow:visible;border:none}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input{line-height:normal}input:focus{outline:none}input[type=checkbox],input[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-appearance:textfield}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}legend{padding:0;border:0}textarea{overflow:auto}table{border-spacing:0;border-collapse:collapse}td,th{padding:0}html{overflow-y:scroll;font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{overflow-x:hidden}body{color:#454545;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:1.5rem;line-height:1.6em;font-weight:400;font-style:normal;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:"liga" on}::-moz-selection{text-shadow:none;background:#cbeafb}::selection{text-shadow:none;background:#cbeafb}hr{position:relative;display:block;width:100%;margin:2.5em 0 3.5em;padding:0;height:1px;border:0;border-top:1px solid #f7f7f7}audio,canvas,iframe,img,svg,video{vertical-align:middle}blockquote,p{margin:0 0 1.5em}blockquote{margin:1.5em 0;padding:0 1.6em;border-left:.5em solid #f8f8f8}blockquote p{margin:.8em 0;font-size:1.2em;font-weight:300}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;opacity:.8}blockquote small:before{content:"\2014   \A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}a{color:#26a8ed;text-decoration:none;-webkit-transition:.4s ease;transition:.4s ease}a:hover{text-decoration:underline;-webkit-transition:.2s ease;transition:.2s ease}h1,h2,h3,h4,h5,h6{margin-top:0;line-height:1.4;font-weight:700;text-rendering:optimizeLegibility}h1{margin:0 0 .5em;font-size:5.7rem;font-weight:800}@media (max-width:500px){h1{font-size:2.7rem}}h2{margin:1.5em 0 .5em;font-size:4rem}@media (max-width:500px){h2{font-size:2rem}}h3{margin:1.5em 0 1em;font-size:3.2rem}@media (max-width:500px){h3{font-size:1.8rem}}h4{font-size:2.6rem}h4,h5{margin:1.5em 0 1em}h5{font-size:2.4rem}h6{margin:1.5em 0 1em;font-size:2.2rem}.kg-card{margin:7vw 0}.kg-embed-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-width:100%}.kg-image{max-width:100%;width:100%}.kg-card figcaption{padding:1.5rem;font-size:1.3rem;line-height:1.4em;font-weight:600;color:#131313;text-align:center;opacity:.4}.kg-width-wide{width:75vw}.kg-width-full,.kg-width-wide{position:relative;min-width:100%;margin-left:calc(50% - 50vw);margin-right:calc(50% - 50vw);-webkit-transform:translateX(calc(50vw - 50%));transform:translateX(calc(50vw - 50%))}.kg-width-full{width:94vw}.kg-width-full figcaption{padding-left:0;padding-right:0;text-align:left}@media (max-width:800px){.kg-width-full{width:100vw}.kg-width-full figcaption{padding-left:6vw}}.kg-gallery-container{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;position:relative;width:75vw;min-width:100%;margin-left:calc(50% - 50vw);margin-right:calc(50% - 50vw);-webkit-transform:translateX(calc(50vw - 50%));transform:translateX(calc(50vw - 50%))}.kg-gallery-container,.kg-gallery-row{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}.kg-gallery-row{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.kg-gallery-image img{display:block;margin:0;width:100%;height:100%}.kg-gallery-row:not(:first-of-type){margin:.75em 0 0}.kg-gallery-image:not(:first-of-type){margin:0 0 0 .75em}.kg-gallery-card+.kg-gallery-card,.kg-gallery-card+.kg-image-card.kg-width-wide,.kg-image-card.kg-width-wide+.kg-gallery-card,.kg-image-card.kg-width-wide+.kg-image-card.kg-width-wide{margin-top:calc(-7vw + .75em)}dl,ol,ul{margin:0 0 2rem}ol,ul{padding-left:1.3em;padding-right:1.5em}ol ol,ol ul,ul ol,ul ul{margin:.5em 0 1em}ul{list-style:disc}ol{list-style:decimal}ol,ul{max-width:100%}li{margin:.5em 0;padding-left:.3em;line-height:1.6em}dt{display:block;font-weight:700;margin:0 0 1rem}dd{margin-left:2rem}.row{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -1rem}.col,.col-1,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-10,.col-11,.col-12{padding:1rem}.col{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;flex-basis:0;max-width:100%}.col-1{-ms-flex-preferred-size:8.3333333%;flex-basis:8.3333333%;max-width:8.3333333%}.col-2{-ms-flex-preferred-size:16.6666666%;flex-basis:16.6666666%;max-width:16.6666666%}.col-3{-ms-flex-preferred-size:25%;flex-basis:25%;max-width:25%}.col-4{-ms-flex-preferred-size:33.3333333%;flex-basis:33.3333333%;max-width:33.3333333%}.col-5{-ms-flex-preferred-size:41.6666666%;flex-basis:41.6666666%;max-width:41.6666666%}.col-6{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}.col-7{-ms-flex-preferred-size:58.3333333%;flex-basis:58.3333333%;max-width:58.3333333%}.col-8{-ms-flex-preferred-size:66.6666666%;flex-basis:66.6666666%;max-width:66.6666666%}.col-9{-ms-flex-preferred-size:75%;flex-basis:75%;max-width:75%}.col-10{-ms-flex-preferred-size:83.3333333%;flex-basis:83.3333333%;max-width:83.3333333%}.col-11{-ms-flex-preferred-size:91.6666666%;flex-basis:91.6666666%;max-width:91.6666666%}.col-12{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}@media (max-width:800px){.col-1,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-10,.col-11{-ms-flex-preferred-size:50%;flex-basis:50%;max-width:50%}}@media (max-width:600px){.col-1,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-10,.col-11{-ms-flex-preferred-size:100%;flex-basis:100%;max-width:100%}}table{border-collapse:separate;margin:0 0 2rem;width:100%;font-size:.8em}th{color:#131313;font-size:.9em;font-weight:700;padding:0 .7em .4em;text-align:left}td{padding:.4em .7em;border-left-width:0;border-top-width:0}td:first-child{border-left-width:1px}tbody tr{border:1px solid #ddd;border-left:0;border-right:0}tbody tr:first-child td{border-top-width:1px}tbody tr:nth-child(odd){background-color:#f8f8f8}tbody td{border-color:#ddd;border-style:solid;border-width:0 1px 1px 0}tfoot{border-width:0}form{margin:0 0 2rem}fieldset{margin:0;padding:0;border:0}label{color:#3eb0ef;display:block;font-size:.9em;font-weight:700;margin:0 0 (2rem * .5)}input[type=email],input[type=password],input[type=search],input[type=tel],input[type=text],input[type=url],select,textarea{background:#f8f8f8;border-radius:.5rem;border:1px solid #ddd;color:inherit;display:block;outline:0;padding:0 .6em;text-decoration:none;width:100%}input[type=email]:invalid,input[type=password]:invalid,input[type=search]:invalid,input[type=tel]:invalid,input[type=text]:invalid,input[type=url]:invalid,select:invalid,textarea:invalid{-webkit-box-shadow:none;box-shadow:none}input[type=email]:focus,input[type=password]:focus,input[type=search]:focus,input[type=tel]:focus,input[type=text]:focus,input[type=url]:focus,select:focus,textarea:focus{border-color:#3eb0ef;-webkit-box-shadow:0 0 0 1px #3eb0ef;box-shadow:0 0 0 1px #3eb0ef}select{height:4rem;padding-right:4rem;text-overflow:ellipsis}select option{color:#3eb0ef;background:#f8f8f8}select:focus::-ms-value{background-color:transparent}select::-ms-expand{display:none}input[type=email],input[type=password],input[type=search],input[type=tel],input[type=text],input[type=url],select{height:4rem}textarea{padding:.3em .6em;resize:vertical}input[type=checkbox],input[type=radio]{display:block;margin-right:-2em;opacity:0;width:1em;z-index:-1}input[type=checkbox]+label,input[type=radio]+label{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#131313;cursor:pointer;font-size:1em;font-weight:400;padding-left:calc(2.4rem + .75em);padding-right:2rem;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}input[type=checkbox]+label:before,input[type=radio]+label:before{background:#f8f8f8;border-radius:.5rem;border:1px solid #ddd;content:"";display:inline-block;height:2.4rem;line-height:2.24rem;text-align:center;width:2.4rem;margin-right:1rem}input[type=checkbox]:checked+label:before,input[type=radio]:checked+label:before{background:#3eb0ef;border-color:#3eb0ef;color:#f8f8f8;content:"\2713"}input[type=checkbox]:focus+label:before,input[type=radio]:focus+label:before{border-color:#3eb0ef;-webkit-box-shadow:0 0 0 1px #3eb0ef;box-shadow:0 0 0 1px #3eb0ef}input[type=checkbox]+label:before{border-radius:.5rem}input[type=radio]+label:before{border-radius:100%}.button,button,input[type=button],input[type=reset],input[type=submit]{display:inline-block;height:4rem;padding:0 2rem;border:0;border-radius:.5rem;cursor:pointer;font-family:Muli,sans-serif;font-size:1.4rem;font-weight:400;line-height:4rem;text-align:center;text-decoration:none;white-space:nowrap;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-transition:.4s ease;transition:.4s ease}.button.fit,button.fit,input[type=button].fit,input[type=reset].fit,input[type=submit].fit{width:100%}.button.small,button.small,input[type=button].small,input[type=reset].small,input[type=submit].small{height:3.6rem;line-height:3.6rem;padding:0 1.5rem;font-size:1.2rem}.button.large,button.large,input[type=button].large,input[type=reset].large,input[type=submit].large{height:4.56rem;line-height:4.56rem;padding:0 3rem;font-size:1.6rem}.button.disabled,.button:disabled,button.disabled,button:disabled,input[type=button].disabled,input[type=button]:disabled,input[type=reset].disabled,input[type=reset]:disabled,input[type=submit].disabled,input[type=submit]:disabled{pointer-events:none;opacity:.4}.button,button,input[type=button],input[type=reset],input[type=submit]{color:#3eb0ef!important;background-color:transparent;-webkit-box-shadow:inset 0 0 0 2px #3eb0ef;box-shadow:inset 0 0 0 2px #3eb0ef}.button:hover,button:hover,input[type=button]:hover,input[type=reset]:hover,input[type=submit]:hover{text-decoration:none;color:#118dd0!important;-webkit-box-shadow:inset 0 0 0 2px #139de7;box-shadow:inset 0 0 0 2px #139de7;-webkit-transition:.2s ease;transition:.2s ease}.button.primary,button.primary,input[type=button].primary,input[type=reset].primary,input[type=submit].primary{color:#fff!important;background-color:#3eb0ef;-webkit-box-shadow:none;box-shadow:none}.button.primary:hover,button.primary:hover,input[type=button].primary:hover,input[type=reset].primary:hover,input[type=submit].primary:hover{background-color:#139de7}.actions{display:-webkit-box;display:-ms-flexbox;display:flex;cursor:default;list-style:none;margin:-1rem;padding-left:0}.actions li{padding:0 0 0 1rem;vertical-align:middle}.actions.special{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;margin-left:0}.actions.special li:first-child{padding-left:0}.actions.stacked{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-left:0}.actions.stacked li{padding:1.3rem 0 0}.actions.stacked li:first-child{padding-top:0}.actions.fit{width:calc(100% + 1rem)}.actions.fit li{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%}.actions.fit.stacked,.actions.fit li>*{width:100%}@media (max-width:var(--xsmall)){.actions:not(.fixed){-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-left:0;width:100%!important}.actions:not(.fixed) li{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;padding:1rem 0 0;text-align:center;width:100%}.actions:not(.fixed) li>*{width:100%}.actions:not(.fixed) li:first-child{padding-top:0}.actions:not(.fixed) li .button,.actions:not(.fixed) li button,.actions:not(.fixed) li input[type=button],.actions:not(.fixed) li input[type=reset],.actions:not(.fixed) li input[type=submit]{width:100%}.actions:not(.fixed) li .button.icon:before,.actions:not(.fixed) li button.icon:before,.actions:not(.fixed) li input[type=button].icon:before,.actions:not(.fixed) li input[type=reset].icon:before,.actions:not(.fixed) li input[type=submit].icon:before{margin-left:-.5rem}}.hamburger{display:-webkit-box;display:-ms-flexbox;display:flex;overflow:visible;margin:0;padding:2px 0;border:0;color:inherit;font:inherit;text-transform:none;background-color:transparent;cursor:pointer;-webkit-transition:opacity .15s linear,-webkit-filter .15s linear;transition:opacity .15s linear,-webkit-filter .15s linear;transition:opacity .15s linear,filter .15s linear;transition:opacity .15s linear,filter .15s linear,-webkit-filter .15s linear}.hamburger-box{position:relative;display:inline-block;width:20px;height:13px}.hamburger-inner{top:50%;display:block;margin-top:-2px}.hamburger-inner,.hamburger-inner:after,.hamburger-inner:before{position:absolute;width:20px;height:1px;background-color:#ababab;border-radius:4px;-webkit-transition:-webkit-transform .15s ease;transition:-webkit-transform .15s ease;transition:transform .15s ease;transition:transform .15s ease,-webkit-transform .15s ease}.hamburger-inner:after,.hamburger-inner:before{content:"";display:block}.hamburger-inner:before{top:-6px}.hamburger-inner:after{bottom:-6px}.hamburger--collapse .hamburger-inner{top:auto;bottom:0;-webkit-transition-delay:.15s;transition-delay:.15s;-webkit-transition-timing-function:cubic-bezier(.55,.055,.675,.19);transition-timing-function:cubic-bezier(.55,.055,.675,.19);-webkit-transition-duration:.15s;transition-duration:.15s}.hamburger--collapse .hamburger-inner:after{top:-12px;-webkit-transition:top .3s cubic-bezier(.33333,.66667,.66667,1) .3s,opacity .1s linear;transition:top .3s cubic-bezier(.33333,.66667,.66667,1) .3s,opacity .1s linear}.hamburger--collapse .hamburger-inner:before{-webkit-transition:top .12s cubic-bezier(.33333,.66667,.66667,1) .3s,-webkit-transform .15s cubic-bezier(.55,.055,.675,.19);transition:top .12s cubic-bezier(.33333,.66667,.66667,1) .3s,-webkit-transform .15s cubic-bezier(.55,.055,.675,.19);transition:top .12s cubic-bezier(.33333,.66667,.66667,1) .3s,transform .15s cubic-bezier(.55,.055,.675,.19);transition:top .12s cubic-bezier(.33333,.66667,.66667,1) .3s,transform .15s cubic-bezier(.55,.055,.675,.19),-webkit-transform .15s cubic-bezier(.55,.055,.675,.19)}.site-head-open .hamburger-inner,.site-head-open .hamburger-inner:after,.site-head-open .hamburger-inner:before{background-color:#131313}.site-head-open .hamburger-inner{-webkit-transition-delay:.32s;transition-delay:.32s;-webkit-transition-timing-function:cubic-bezier(.215,.61,.355,1);transition-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translate3d(0,-6px,0) rotate(-45deg);transform:translate3d(0,-6px,0) rotate(-45deg)}.site-head-open .hamburger-inner:after{top:0;opacity:0;-webkit-transition:top .3s cubic-bezier(.33333,0,.66667,.33333),opacity .1s linear .27s;transition:top .3s cubic-bezier(.33333,0,.66667,.33333),opacity .1s linear .27s}.site-head-open .hamburger-inner:before{top:0;-webkit-transition:top .12s cubic-bezier(.33333,0,.66667,.33333) .18s,-webkit-transform .15s cubic-bezier(.215,.61,.355,1) .42s;transition:top .12s cubic-bezier(.33333,0,.66667,.33333) .18s,-webkit-transform .15s cubic-bezier(.215,.61,.355,1) .42s;transition:top .12s cubic-bezier(.33333,0,.66667,.33333) .18s,transform .15s cubic-bezier(.215,.61,.355,1) .42s;transition:top .12s cubic-bezier(.33333,0,.66667,.33333) .18s,transform .15s cubic-bezier(.215,.61,.355,1) .42s,-webkit-transform .15s cubic-bezier(.215,.61,.355,1) .42s;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.transition-fade{-webkit-transition:.25s;transition:.25s;opacity:1;-webkit-animation:slideUp .9s cubic-bezier(.075,.82,.165,1) forwards;animation:slideUp .9s cubic-bezier(.075,.82,.165,1) forwards;-webkit-transform:translate3d(0,4vh,0);transform:translate3d(0,4vh,0)}html.is-animating .transition-fade{opacity:0}@-webkit-keyframes slideUp{0%{-webkit-transform:translate3d(0,4vh,0);transform:translate3d(0,4vh,0)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes slideUp{0%{-webkit-transform:translate3d(0,4vh,0);transform:translate3d(0,4vh,0)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}body{font-family:Muli,sans-serif;background:#f8f8f8;-webkit-transition:background .3s ease-out;transition:background .3s ease-out;-webkit-transition-delay:.25;transition-delay:.25}.img{display:block;width:100%;height:100%;background-position:50%;background-size:cover;border-radius:100%}.hidden{visibility:hidden;position:absolute;text-indent:-9999px}.site-wrapper{padding:3vw;min-height:100vh}@media (max-width:850px){.site-wrapper{padding:6vw}}.page-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:13vw 0;max-width:70%;margin:auto;text-align:center}.error-head{height:75vh}.error-head h1{margin:0;font-size:7rem;line-height:1.1em;font-weight:800;letter-spacing:10px}.error-head p{font-size:1.4rem;text-transform:uppercase;letter-spacing:1px;color:#919191}.error-link{margin-top:1rem;font-size:1.5rem;text-decoration:underline}.page-head-title{margin:0;font-size:4.2rem;color:#131313}@media (max-width:500px){.page-head-title{font-size:2rem}}.page-head-description{margin:0 0 1.6vw;color:#ababab;font-size:2.2rem;line-height:1.35em}@media (max-width:500px){.page-head-description{font-size:1.6rem}}.site-foot{margin:3vw 0 1vw;text-align:center;color:#ababab;font-size:1.4rem}.site-foot a{color:#131313}.site-head{position:relative;z-index:300;margin-top:-10px;font-size:1.35rem}.site-head-container{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.site-head-container,.site-head-left{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.site-head-left{position:relative;z-index:100;margin-right:10px;white-space:nowrap}.nav{display:-webkit-box;display:-ms-flexbox;display:flex;margin:0 0 0 -12px;padding:0;list-style:none}.site-head li{display:block;margin:0;padding:0}.site-head-left a,.site-head-right a{display:block;margin:0;padding:10px 12px;color:#131313;font-weight:600;opacity:.4}.nav-current a,.site-head a:hover{text-decoration:none;opacity:1}.site-head-center{position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%}.site-head-logo{-ms-flex-negative:0;flex-shrink:0;display:block;padding:10px;color:#131313;font-size:2.1rem;line-height:1em;font-weight:700;text-transform:uppercase;letter-spacing:1px}.site-head-logo:hover{text-decoration:none}.site-head-logo img{display:block;margin-top:2px;width:auto;height:28px}.site-head-right{position:relative;z-index:100}.site-head-right,.social-links{-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.subscribe-button{display:block;padding:4px 10px;border:1px solid #131313;color:#131313;font-size:1.2rem;line-height:1em;border-radius:10px;opacity:.8}.subscribe-button:hover{text-decoration:none;opacity:1}.rss-button{opacity:.4}.rss-button:hover{opacity:1}.rss-button svg{margin-bottom:1px;height:2.1rem;fill:#131313}.nav-burger{display:none;position:absolute;left:0;z-index:9999;padding:12px 12px 12px 0}@media (max-width:850px){.site-head{padding:0}.nav-burger{display:block}.site-head-container{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;height:40px;background:hsla(0,0%,100%,0);z-index:-1;-webkit-transition:all .4s ease-out;transition:all .4s ease-out;overflow:hidden}.site-head-left,.site-head-right{position:relative;z-index:-1;height:auto;-webkit-transition:height .2s cubic-bezier(.4,.01,.165,.99);transition:height .2s cubic-bezier(.4,.01,.165,.99);-webkit-transition-delay:1s;transition-delay:1s}.site-head-left a,.site-head-right a{margin:8px 0;padding:1px 0;font-size:2.6rem;line-height:1.15em;font-weight:200;opacity:0;-webkit-transition:opacity .2s cubic-bezier(.4,.01,.165,.99),-webkit-transform .3s cubic-bezier(.4,.01,.165,.99);transition:opacity .2s cubic-bezier(.4,.01,.165,.99),-webkit-transform .3s cubic-bezier(.4,.01,.165,.99);transition:transform .3s cubic-bezier(.4,.01,.165,.99),opacity .2s cubic-bezier(.4,.01,.165,.99);transition:transform .3s cubic-bezier(.4,.01,.165,.99),opacity .2s cubic-bezier(.4,.01,.165,.99),-webkit-transform .3s cubic-bezier(.4,.01,.165,.99);-webkit-transform:scale(1.1) translateY(-25px);transform:scale(1.1) translateY(-25px)}.site-head-right a{padding:5px 0;margin:1px 0;font-size:2rem}.nav{width:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;margin:3vw 0 0}.site-head-left{-webkit-box-ordinal-group:3;-ms-flex-order:2;order:2;margin:0;width:100%}.site-head-center{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1;position:static;z-index:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.site-head-right{-webkit-box-ordinal-group:4;-ms-flex-order:3;order:3;width:100%;margin-top:3vw}.social-links{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.site-head-open{background:#fff;-webkit-transition:background .5s ease-out;transition:background .5s ease-out;-webkit-transition-delay:.25;transition-delay:.25;overflow:hidden;height:100vh}.site-head-open .site-head-container{height:100vh;-webkit-transition:height .2s ease-in;transition:height .2s ease-in}.site-head-open .site-head-left,.site-head-open .site-head-right{z-index:9999;height:auto;-webkit-transition:height .2s cubic-bezier(.4,.01,.165,.99);transition:height .2s cubic-bezier(.4,.01,.165,.99)}.site-head-open .site-head-left a,.site-head-open .site-head-right a{opacity:1;-webkit-transition:opacity .9s cubic-bezier(.4,.01,.165,.99),-webkit-transform .6s cubic-bezier(.4,.01,.165,.99);transition:opacity .9s cubic-bezier(.4,.01,.165,.99),-webkit-transform .6s cubic-bezier(.4,.01,.165,.99);transition:transform .6s cubic-bezier(.4,.01,.165,.99),opacity .9s cubic-bezier(.4,.01,.165,.99);transition:transform .6s cubic-bezier(.4,.01,.165,.99),opacity .9s cubic-bezier(.4,.01,.165,.99),-webkit-transform .6s cubic-bezier(.4,.01,.165,.99);-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}.site-head-open .nav-current a{border-bottom:2px solid #131313}.site-head-open .site-head-right a{opacity:.5}.site-head-open .site-foot{display:block;position:fixed;z-index:9999;bottom:0;-webkit-transition:-webkit-transform .3s cubic-bezier(.4,.01,.165,.99);transition:-webkit-transform .3s cubic-bezier(.4,.01,.165,.99);transition:transform .3s cubic-bezier(.4,.01,.165,.99);transition:transform .3s cubic-bezier(.4,.01,.165,.99),-webkit-transform .3s cubic-bezier(.4,.01,.165,.99);-webkit-transform:translateY(-4vw);transform:translateY(-4vw)}}.post-feed{-ms-flex-wrap:wrap;flex-wrap:wrap}.post-card,.post-feed{display:-webkit-box;display:-ms-flexbox;display:flex}.post-card{-webkit-box-flex:1;-ms-flex:1 1 50%;flex:1 1 50%;position:relative;height:35vw;background:linear-gradient(135deg,#1f1f1f,#111) 50%;background-size:cover;overflow:hidden;counter-increment:posts}@media (max-width:700px){.post-card{-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;height:70vw}}.post-card-large{-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%}.post-card-link{display:block}.post-card-content,.post-card-link{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.post-card-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;right:0;bottom:0;left:0;color:#fff;background:rgba(0,0,0,.1);opacity:1;-webkit-transition:opacity .5s cubic-bezier(.33,0,.2,1);transition:opacity .5s cubic-bezier(.33,0,.2,1)}.post-card.with-image .post-card-content{opacity:0}@media (max-width:700px){.post-card.with-image .post-card-content{opacity:1}}.post-card-link:hover .post-card-content{opacity:1;-webkit-transition:opacity .3s cubic-bezier(.33,0,.2,1);transition:opacity .3s cubic-bezier(.33,0,.2,1)}.post-card-title{margin:0;display:inline-block;font-size:3.4rem;max-width:70%;text-align:center;-webkit-transition:all .3s cubic-bezier(.33,0,.2,1);transition:all .3s cubic-bezier(.33,0,.2,1)}.post-card.no-image:before{display:block;content:counter(posts);position:absolute;bottom:-.15em;right:5vw;font-size:28vw;line-height:1em;font-weight:800;letter-spacing:-.1em;color:rgba(0,0,0,.2)}.post-card.no-image .post-card-content{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:4vw}.post-card.no-image .post-card-title{font-size:5rem;line-height:1.15em;text-align:left}.post-card.no-image:hover .post-card-title{text-decoration:underline}@media (max-width:1200px){.post-card.no-image .post-card-title{font-size:3.4rem}}@media (max-width:700px){.post-card.no-image:before{font-size:50vw}}.post-content{padding:6vw 0}.post-content h2{font-size:3rem}.post-content>.post-content-body>.gatsby-highlight{max-width:900px;margin-left:auto;margin-right:auto}.post-content-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.post-content-title{margin:0 0 3vw;color:#131313;text-align:center}.post-content-excerpt{margin:-2vw 0 3vw;font-size:2.2rem;line-height:1.6em;color:#131313;text-align:center;opacity:.5}@media (max-width:500px){.post-content-excerpt{font-size:1.8rem}}.post-content-image{position:relative;width:75vw;min-width:100%;margin:3em calc(50% - 50vw);-webkit-transform:translateX(calc(50vw - 50%));transform:translateX(calc(50vw - 50%))}.post-content-body{font-size:1.7rem;line-height:1.65em}@media (max-width:500px){.post-content-body{font-size:1.7rem}}.post-content-body h1,.post-content-body h2,.post-content-body h3,.post-content-body h4,.post-content-body h5,.post-content-body h6{color:#131313}.post-content-body li{word-break:break-word}.post-content-body li p{margin:0}.post-content-body iframe{margin:0 auto!important}.post-content-body blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:3px solid #3eb0ef}.post-content-body blockquote p{margin:0 0 1em;color:inherit;font-size:inherit;line-height:inherit;font-style:italic}.post-content-body blockquote p:last-child{margin-bottom:0}.post-content-body code{padding:0 5px 2px;font-size:.8em;line-height:1.8em;font-weight:400!important;background:#f8f8f8;border-radius:3px}.post-content-body p code{word-break:break-all}.post-content-body pre{font-family:monospace,monospace;background-color:transparent;overflow-x:auto;margin:1.5em 0 3em;padding:20px 0 20px 20px;max-width:100%;border:1px solid #d9d9d9;font-size:1.55rem;line-height:1.5em;border-radius:5px}.post-content-body pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent;color:#454545}.post-content-body code[class*=language-]::-moz-selection,.post-content-body code[class*=language-] ::-moz-selection,.post-content-body pre[class*=language-]::-moz-selection,.post-content-body pre[class*=language-] ::-moz-selection{background:#cbeafb}.post-content-body code[class*=language-]::selection,.post-content-body code[class*=language-] ::selection,.post-content-body pre[class*=language-]::selection,.post-content-body pre[class*=language-] ::selection{background:#cbeafb}.post-content-body pre code :not(span){color:inherit}.post-content-body .fluid-width-video-wrapper{margin:1.5em 0 3em}.post-content-body hr{margin:4vw 0}.post-content-body hr:after{content:"";position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#f7f7f7;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.footnotes-sep{margin-bottom:30px}.footnotes{font-size:1.5rem}.footnotes p{margin:0}.footnote-backref{color:#3eb0ef!important;font-size:1.2rem;font-weight:700;text-decoration:none!important;-webkit-box-shadow:none!important;box-shadow:none!important}.author-meta{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-bottom:10px;color:#ababab}.author-links,.author-meta{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.author-links{margin-top:20px}.author-links a{display:block;margin:0;padding:0 12px;color:#131313;opacity:.4}.author-links a:hover{text-decoration:none;opacity:1}.author-links .divider{display:inline-block;margin:0 3px}.post-content-body .line-numbers .line-numbers-rows{border-right:1px solid #d9d9d9;padding-left:10px;margin-top:19px;margin-bottom:20px}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=3f6dadcde453fea67f3c0226d8b431c7" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#879aa8"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=3f6dadcde453fea67f3c0226d8b431c7"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=3f6dadcde453fea67f3c0226d8b431c7"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=3f6dadcde453fea67f3c0226d8b431c7"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=3f6dadcde453fea67f3c0226d8b431c7"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=3f6dadcde453fea67f3c0226d8b431c7"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=3f6dadcde453fea67f3c0226d8b431c7"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=3f6dadcde453fea67f3c0226d8b431c7"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=3f6dadcde453fea67f3c0226d8b431c7"/><title data-react-helmet="true">Creating a serverless thumbnail service with AWS CDK | Lukas Steinbrecher</title><meta data-react-helmet="true" name="description" content="This arctive describes how to build a service that automatically creates thumbnails of uploaded pictures that can, for example, be used for a blog. To create"/><meta data-react-helmet="true" property="og:title" content="Creating a serverless thumbnail service with AWS CDK"/><meta data-react-helmet="true" property="og:description" content="This arctive describes how to build a service that automatically creates thumbnails of uploaded pictures that can, for example, be used for a blog. To create"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Lukas Steinbrecher"/><meta data-react-helmet="true" name="twitter:title" content="Creating a serverless thumbnail service with AWS CDK"/><meta data-react-helmet="true" name="twitter:description" content="This arctive describes how to build a service that automatically creates thumbnails of uploaded pictures that can, for example, be used for a blog. To create"/><link as="script" rel="preload" href="/webpack-runtime-3393e4c65171b720585c.js"/><link as="script" rel="preload" href="/framework-305b3707783ccc9d7ca6.js"/><link as="script" rel="preload" href="/app-4612523c4e7665fd5403.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/commons-6d5694db2e35908de204.js"/><link as="script" rel="preload" href="/93241701166c3169d92c9fdd395837837cace836-c1caf2270f19838e1a92.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-da42ae5d5d25f1f56248.js"/><link as="fetch" rel="preload" href="/page-data/2021-11-21-creating-a-serverless-thumbnail-service-with-aws-cdk/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="site-wrapper"><header class="header fixed"><a class="logoType" href="/about"><div class="logo"><img src="/static/profile-pic-small-3f6dadcde453fea67f3c0226d8b431c7.jpg" alt="Lukas Steinbrecher"/></div><div class="type"><h1 class="">lukas steinbrecher</h1></div></a><nav rel="js-menu" class="menu"><ul class="itemList"><li class="item"><a class="" data-slug="/posts" href="/posts"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="laptop-code" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="svg-inline--fa fa-laptop-code fa-w-20 fa-lg"><path fill="currentColor" d="M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z" class=""></path></svg>Posts</a></li><li class="item"><a class="" data-slug="/about/" href="/about/"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="user-astronaut" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-user-astronaut fa-w-14 fa-fw fa-lg"><path fill="currentColor" d="M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z" class=""></path></svg>About</a></li><li class="item"><div class="icons"><a href="https://github.com/lukstei" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+R2l0SHViIGljb248L3RpdGxlPjxwYXRoIGQ9Ik0xMiAuMjk3Yy02LjYzIDAtMTIgNS4zNzMtMTIgMTIgMCA1LjMwMyAzLjQzOCA5LjggOC4yMDUgMTEuMzg1LjYuMTEzLjgyLS4yNTguODItLjU3NyAwLS4yODUtLjAxLTEuMDQtLjAxNS0yLjA0LTMuMzM4LjcyNC00LjA0Mi0xLjYxLTQuMDQyLTEuNjFDNC40MjIgMTguMDcgMy42MzMgMTcuNyAzLjYzMyAxNy43Yy0xLjA4Ny0uNzQ0LjA4NC0uNzI5LjA4NC0uNzI5IDEuMjA1LjA4NCAxLjgzOCAxLjIzNiAxLjgzOCAxLjIzNiAxLjA3IDEuODM1IDIuODA5IDEuMzA1IDMuNDk1Ljk5OC4xMDgtLjc3Ni40MTctMS4zMDUuNzYtMS42MDUtMi42NjUtLjMtNS40NjYtMS4zMzItNS40NjYtNS45MyAwLTEuMzEuNDY1LTIuMzggMS4yMzUtMy4yMi0uMTM1LS4zMDMtLjU0LTEuNTIzLjEwNS0zLjE3NiAwIDAgMS4wMDUtLjMyMiAzLjMgMS4yMy45Ni0uMjY3IDEuOTgtLjM5OSAzLS40MDUgMS4wMi4wMDYgMi4wNC4xMzggMyAuNDA1IDIuMjgtMS41NTIgMy4yODUtMS4yMyAzLjI4NS0xLjIzLjY0NSAxLjY1My4yNCAyLjg3My4xMiAzLjE3Ni43NjUuODQgMS4yMyAxLjkxIDEuMjMgMy4yMiAwIDQuNjEtMi44MDUgNS42MjUtNS40NzUgNS45Mi40Mi4zNi44MSAxLjA5Ni44MSAyLjIyIDAgMS42MDYtLjAxNSAyLjg5Ni0uMDE1IDMuMjg2IDAgLjMxNS4yMS42OS44MjUuNTdDMjAuNTY1IDIyLjA5MiAyNCAxNy41OTIgMjQgMTIuMjk3YzAtNi42MjctNS4zNzMtMTItMTItMTIiLz48L3N2Zz4=" alt="GitHub lukstei"/></a><a href="https://www.xing.com/profile/Lukas_Steinbrecher" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+WGluZyBpY29uPC90aXRsZT48cGF0aCBkPSJNMTguMTg4IDBjLS41MTcgMC0uNzQxLjMyNS0uOTI3LjY2IDAgMC03LjQ1NSAxMy4yMjQtNy43MDIgMTMuNjU3LjAxNS4wMjQgNC45MTkgOS4wMjMgNC45MTkgOS4wMjMuMTcuMzA4LjQzNi42Ni45NjcuNjZoMy40NTRjLjIxMSAwIC4zNzUtLjA3OC40NjMtLjIyLjA4OS0uMTUxLjA4OS0uMzQ2LS4wMDktLjUzNmwtNC44NzktOC45MTZjLS4wMDQtLjAwNi0uMDA0LS4wMTYgMC0uMDIyTDIyLjEzOS43NTZjLjA5NS0uMTkxLjA5Ny0uMzg3LjAwNi0uNTM1QzIyLjA1Ni4wNzggMjEuODk0IDAgMjEuNjg2IDBoLTMuNDk4ek0zLjY0OCA0Ljc0Yy0uMjExIDAtLjM4NS4wNzQtLjQ3My4yMTYtLjA5LjE0OS0uMDc4LjMzOS4wMi41MzFsMi4zNCA0LjA1Yy4wMDQuMDEuMDA0LjAxNiAwIC4wMjFMMS44NiAxNi4wNTFjLS4wOTkuMTg4LS4wOTMuMzgxIDAgLjUyOS4wODUuMTQyLjIzOS4yMzQuNDUuMjM0aDMuNDYxYy41MTggMCAuNzY2LS4zNDguOTQ1LS42NjdsMy43MzQtNi42MDktMi4zNzgtNC4xNTVjLS4xNzItLjMxNS0uNDM0LS42NTktLjk2Mi0uNjU5SDMuNjQ4di4wMTZ6Ii8+PC9zdmc+" alt="XING"/></a><a href="https://at.linkedin.com/in/lukstei" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+TGlua2VkSW4gaWNvbjwvdGl0bGU+PHBhdGggZD0iTTIwLjQ0NyAyMC40NTJoLTMuNTU0di01LjU2OWMwLTEuMzI4LS4wMjctMy4wMzctMS44NTItMy4wMzctMS44NTMgMC0yLjEzNiAxLjQ0NS0yLjEzNiAyLjkzOXY1LjY2N0g5LjM1MVY5aDMuNDE0djEuNTYxaC4wNDZjLjQ3Ny0uOSAxLjYzNy0xLjg1IDMuMzctMS44NSAzLjYwMSAwIDQuMjY3IDIuMzcgNC4yNjcgNS40NTV2Ni4yODZ6TTUuMzM3IDcuNDMzYy0xLjE0NCAwLTIuMDYzLS45MjYtMi4wNjMtMi4wNjUgMC0xLjEzOC45Mi0yLjA2MyAyLjA2My0yLjA2MyAxLjE0IDAgMi4wNjQuOTI1IDIuMDY0IDIuMDYzIDAgMS4xMzktLjkyNSAyLjA2NS0yLjA2NCAyLjA2NXptMS43ODIgMTMuMDE5SDMuNTU1VjloMy41NjR2MTEuNDUyek0yMi4yMjUgMEgxLjc3MUMuNzkyIDAgMCAuNzc0IDAgMS43Mjl2MjAuNTQyQzAgMjMuMjI3Ljc5MiAyNCAxLjc3MSAyNGgyMC40NTFDMjMuMiAyNCAyNCAyMy4yMjcgMjQgMjIuMjcxVjEuNzI5QzI0IC43NzQgMjMuMiAwIDIyLjIyMiAwaC4wMDN6Ii8+PC9zdmc+" alt="LinkedIn"/></a><a href="mailto:lukas@lukstei.com"><img src="data:image/svg+xml;base64,PHN2ZyByb2xlPSJpbWciIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+TWFpbC5SdSBpY29uPC90aXRsZT48cGF0aCBkPSJNMTEuNTg1IDUuMjY3YzEuODM0IDAgMy41NTguODExIDQuODI0IDIuMDh2LjAwNGMwLS42MDkuNDEtMS4wNjguOTc5LTEuMDY4aC4xNDVjLjg5MSAwIDEuMDczLjg0MiAxLjA3MyAxLjEwOWwuMDA1IDkuNDc1Yy0uMDYzLjYyMS42NC45NDEgMS4wMjkuNTQzIDEuNTIxLTEuNTY0IDMuMzQyLTguMDM4LS45NDYtMTEuNzktMy45OTYtMy40OTctOS4zNTctMi45MjEtMTIuMjA5LS45NTUtMy4wMzEgMi4wOTEtNC45NzEgNi43MTgtMy4wODYgMTEuMDY0IDIuMDU0IDQuNzQgNy45MzEgNi4xNTIgMTEuNDI0IDQuNzQ0IDEuNzY5LS43MTUgMi41ODYgMS42NzYuNzQ5IDIuNDU3LTIuNzc2IDEuMTg0LTEwLjUwMiAxLjA2NC0xNC4xMS01LjE4OEMtLjk3NyAxMy41MjEtLjg0NyA2LjA5MyA1LjYyIDIuMjQ1IDEwLjU2Ny0uNjk4IDE3LjA5LjExNyAyMS4wMjIgNC4yMjRjNC4xMTEgNC4yOTQgMy44NzIgMTIuMzM0LS4xMzkgMTUuNDYxLTEuODE2IDEuNDItNC41MTYuMDM3LTQuNDk4LTIuMDMxbC0uMDE5LS42NzhjLTEuMjY1IDEuMjU2LTIuOTQ4IDEuOTg4LTQuNzgyIDEuOTg4LTMuNjI1IDAtNi44MTMtMy4xODktNi44MTMtNi44MTIgMC0zLjY1OSAzLjE4OS02Ljg4NSA2LjgxNC02Ljg4NXptNC41NjEgNi42MjNjLS4xMzctMi42NTMtMi4xMDYtNC4yNDktNC40ODQtNC4yNDloLS4wOWMtMi43NDUgMC00LjI2OCAyLjE1OS00LjI2OCA0LjYxIDAgMi43NDcgMS44NDIgNC40ODEgNC4yNTYgNC40ODEgMi42OTMgMCA0LjQ2NC0xLjk3MyA0LjU5Mi00LjMwNmwtLjAwNi0uNTM2eiIvPjwvc3ZnPg==" alt="Mail"/></a></div></li></ul></nav></header><main id="site-main" class="site-main"><div id="swup" class="transition-fade"><article class="post-content"><div class="post-content-image"><div class="kg-image gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:44.411764705882355%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABiUlEQVQoz5VSy0rDUBDNJ/kn/pCge8GCG7tzIYi6SP0BwUdfmwq2tVUkDbahliRN0iY3uXn1OHM1ot15YLiT3Jkzd+aMttlsUFlZlmDc3DaVrYIAnuchjmNIKdWZ5zlkkih/2xL6rzERg8+iKJR/enaJ86tr+L4H0zSxWq1UMJPNPxaIyefibJzDxndhGEKryH6jImY4rgvDMDCdziiuxMH+HhWZqLs0Tf/kiVhAy/MC7tKH47hYr9ewbUeRmM4b1tKH6yxRqx0hoRrF4gXzwx2UowtYto9Ou0W5S0w9A17k0igkNElV3qm6lClO6nX0eo8QIsF41kcgPPhegEZDR0ZNxNYrpse7CJ8aSHKoFsMwUrG2T6MQMTSeg23b6sm6rsOyLLoQ6Ha6mExMJcbzaEQdODRTH81Wm77HP2261M393QMG/QGiKPqaIaNSmMEisGppKpFlGREFqgP+PxwOVVGeOwvBeVyU4xRhtTKVGOxXK5B8rwcnsC/o5UJE6txel8rXsIVtxf+LT18IqzRBfysHAAAAAElFTkSuQmCC" alt="Creating a serverless thumbnail service with AWS CDK" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/ae20ac1851389684a5c727d6d2041a59/c972b/service.png 340w,
/static/ae20ac1851389684a5c727d6d2041a59/27625/service.png 680w,
/static/ae20ac1851389684a5c727d6d2041a59/40a76/service.png 1360w,
/static/ae20ac1851389684a5c727d6d2041a59/583b1/service.png 1670w" sizes="(max-width: 1360px) 100vw, 1360px" /><img loading="lazy" sizes="(max-width: 1360px) 100vw, 1360px" srcset="/static/ae20ac1851389684a5c727d6d2041a59/c972b/service.png 340w,
/static/ae20ac1851389684a5c727d6d2041a59/27625/service.png 680w,
/static/ae20ac1851389684a5c727d6d2041a59/40a76/service.png 1360w,
/static/ae20ac1851389684a5c727d6d2041a59/583b1/service.png 1670w" src="/static/ae20ac1851389684a5c727d6d2041a59/40a76/service.png" alt="Creating a serverless thumbnail service with AWS CDK" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><style data-emotion-css="qf0dye">.css-qf0dye.css-qf0dye{margin-bottom:45px;}</style><header class="post-content-header css-qf0dye e16oe4lg1"><h1 class="post-content-title">Creating a serverless thumbnail service with AWS CDK</h1><style data-emotion-css="1vaqcjl">.css-1vaqcjl.css-1vaqcjl{color:#808080;font-size:1.7rem;}.css-1vaqcjl a{color:rgb(69,69,69);}.css-1vaqcjl a:hover{color:black;-webkit-text-decoration:none;text-decoration:none;}.css-1vaqcjl .author{margin-left:5px;font-weight:600;}.css-1vaqcjl .gatsby-image-wrapper{top:7px;border-radius:12px;}</style><div class="post-data css-1vaqcjl e16oe4lg0"><a href="/about"> <div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:27px;height:27px"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQDAgX/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAgED/9oADAMBAAIQAxAAAAH04bZ5qtMnMdjo5B//xAAcEAACAQUBAAAAAAAAAAAAAAAAAQIDBBEiMhL/2gAIAQEAAQUCfNunnKPZR0NkQ6kTk4n/xAAVEQEBAAAAAAAAAAAAAAAAAAAQAf/aAAgBAwEBPwEp/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGhABAAIDAQAAAAAAAAAAAAAAAQAQETFRYf/aAAgBAQAGPwJm1PbZ2zE//8QAGhAAAwEBAQEAAAAAAAAAAAAAAAERITFRgf/aAAgBAQABPyFZLM6KLGidTUhlJa5kK0XRtnNbTXwNEp6NE8H/2gAMAwEAAgADAAAAEH//AIP/xAAYEQADAQEAAAAAAAAAAAAAAAABEBEhMf/aAAgBAwEBPxATauiv/8QAGBEBAQEBAQAAAAAAAAAAAAAAAQARIUH/2gAIAQIBAT8QNzlrHkBf/8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFBUWGB/9oACAEBAAE/EGz6HQ2Y5E0TMATsXqNmyW9FVt8fUDYItXgzGZQKgPMat90+EbSWIuYDfXbZ/9k=" alt="Lukas Steinbrecher" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/3f6dadcde453fea67f3c0226d8b431c7/7a3a8/profile-pic-small.jpg 1x,
/static/3f6dadcde453fea67f3c0226d8b431c7/f5261/profile-pic-small.jpg 1.5x,
/static/3f6dadcde453fea67f3c0226d8b431c7/2da06/profile-pic-small.jpg 2x" /><img loading="lazy" width="27" height="27" srcset="/static/3f6dadcde453fea67f3c0226d8b431c7/7a3a8/profile-pic-small.jpg 1x,
/static/3f6dadcde453fea67f3c0226d8b431c7/f5261/profile-pic-small.jpg 1.5x,
/static/3f6dadcde453fea67f3c0226d8b431c7/2da06/profile-pic-small.jpg 2x" src="/static/3f6dadcde453fea67f3c0226d8b431c7/7a3a8/profile-pic-small.jpg" alt="Lukas Steinbrecher" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><span class="author">Lukas Steinbrecher</span></a>,<!-- -->November 21, 2021<!-- -->  <!-- -->10<!-- --> minute read</div></header><div class="post-content-body"><p>This arctive describes how to build a service that automatically creates thumbnails of uploaded pictures that can, for example, be used for a blog.</p>
<p>To create our service we will use S3 - the AWS file storage service - to store the pictures and thumbnails, and AWS Lambda - the AWS serverless computing service - to create the thumbnails.
When a user uploads a picture to the source S3 bucket, a lambda function will be triggered, that will execute our code to generate the thumbnails and will put it into a target bucket. The process for doing so is described in the detailed step-by-step manual below.</p>
<p>To define the cloud resources of our service within AWS, we will use AWS CDK (Cloud development kit, <a href="https://aws.amazon.com/de/cdk/">https://aws.amazon.com/de/cdk/</a>), a new library to write infrastructure code. In this example we will use Typescript as our programming language of choice.</p>
<p>The final code can be downloaded at <a href="https://github.com/lukstei/thumbnail-service-cdk">https://github.com/lukstei/thumbnail-service-cdk</a>.</p>
<h3>Getting started with the AWS CDK</h3>
<p>So what it is AWS CDK?
In a nutshell, it is a library for generating a CloudFormation template (which is a JSON file defining our AWS infrastructure) in different languages like Typescript, Python or Java.
It is important to understand that when using CDK, the CloudFormation template is generated on the computer locally, which means there is no AWS Service called CDK.</p>
<p>After the CloudFormation template has been created, it can then be uploaded to the AWS CloudFormation service, which creates the described infrastructure in AWS (this works for both the initial creation as well as changes made for reassources that are already in place - further information at <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets.html">https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-changesets.html</a>).</p>
<p>To get started, we need to learn about a few concepts, that are specific to CDK:</p>
<ul>
<li><strong>App:</strong> The root construct, which is a container for one or more stacks.</li>
<li><strong>Stack:</strong> A stack is a unit of deployment, all resources within a stack are provisioned as a single unit. You can deploy stacks individually or as a group.</li>
<li><strong>Construct:</strong> The main abstraction unit/building block of a stack. A construct contains one or more logically related resources. There are L1 Constructs, which directly correspond to the resources defined by CloudFormation, and higher order Constructs, which represent one or more resources and may already contain some logic.</li>
<li><strong>Resource:</strong> Represents an actual entity within AWS, e.g. an EC2 instance or a S3 bucket. Each resource is identified by a unique ARN (Amazon Resource Name).</li>
<li><strong>Token:</strong> Represents a value that is not known yet. When we, for example, want to pass the ARN of an S3 bucket to a Lambda function, the ARN is only known after the ressource ist created. A token is therefore used as a placeholder (the system uses CloudFormation references) that is resolved in the background automatically upon creation.</li>
<li><strong>Synthesizing:</strong> Process of executing our CDK code that defines the infrastructure (using CDK Constructs) and generates the CloudFormation template.</li>
</ul>
<p>One could ask why even bother learning new concepts when we have our good old CloudFormation templates?
In my opinion there are many advantages when using CDK compared to writing CloudFormation templates by hand:</p>
<ul>
<li><strong>Familiar tooling and programming language concepts:</strong> I can use my well known tools like the IDE and the tooling it provides (including code auto-completion and refactoring). I can use a programming language I am already familiar with and the CDK integrates it into the provided programming languages constructs, like using variables for references. I can use the package manager to use and create dependencies and use a familiar file structure for my code.</li>
<li><strong>No need to learn a new schema:</strong> I do not have to learn the nitty-gritty details of a schema like CloudFormation templates to define my infrastructure. I can focus on the business logic, i.e. how I want to put together my resources (of course I still need to get familiar with the resource/API constructs provided by the AWS platform)</li>
<li><strong>Testing:</strong> I can unit test the code as usual, e.g. with Jest</li>
<li><strong>Compactness and maintainability:</strong> In my example I was able to define the service infrastructure with as little as about 30 lines, which will then transform to a 300 line cloudformation template. I can also leverage the provided abstraction constructs of the chosen programming language. This helps me to define everything with more compact code and makes it more maintainable.</li>
<li><strong>Fun and fast:</strong> Last but not least, it is just more fun sticking together the different services and getting instant feedback by the type system and IDE, than to mess around with a 300 lines YAML file. Not to mention, I am faster navigating and reading the API definitions in the code (which in our case are Typescript files/types) than browsing a website to read the documentation.</li>
</ul>
<h2>Lets get started</h2>
<p>To follow this example you will need an AWS account, have the AWS CLI configured and installed the AWS CDK via <code>npm install -g aws-cdk</code>.
Clone the repository from <code>https://github.com/lukstei/thumbnail-service-cdk</code>.</p>
<p>We will go through each important file and explain the interesting parts on the way.</p>
<h4>The entry point</h4>
<p>The first file we look into is <code>bin/cdk-lambda.ts</code>:</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript"><span class="token hashbang comment">#!/usr/bin/env node</span>
<span class="token keyword">import</span> <span class="token string">'source-map-support/register'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> cdk <span class="token keyword">from</span> <span class="token string">'@aws-cdk/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CdkThumbnailServiceStack <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../lib/CdkThumbnailServiceStack'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">cdk</span><span class="token punctuation">.</span><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">CdkThumbnailServiceStack</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token string">'CdkThumbnailServiceStack'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    tags<span class="token operator">:</span> <span class="token punctuation">{</span>
        app<span class="token operator">:</span> <span class="token string">"thumbnail-service"</span><span class="token punctuation">,</span>
        env<span class="token operator">:</span> <span class="token string">"dev"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>This defines the entry point of our stack. The CDK will execute this file and all constructs our stack contains to generate the CloudFormation template.</p>
<p>In our case we only defined one stack <code>CdkThumbnailServiceStack</code>, for which we pass some tags in order to stay organized. AWS resources can be tagged in order to categorize them. When we define a tag for a stack it will get applied to all resources the stack creates.</p>
<h4>The thumbnail service stack</h4>
<p>Next, lets look into the <code>CdkThumbnailServiceStack</code>, which is located in <code>lib-cdk-lambda-stack.ts</code>:</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> cdk <span class="token keyword">from</span> <span class="token string">'@aws-cdk/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CfnOutput <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@aws-cdk/core"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ThumbnailingBucket <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./ThumbnailingBucket"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CdkThumbnailServiceStack</span> <span class="token keyword">extends</span> <span class="token class-name">cdk</span><span class="token punctuation">.</span>Stack <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>scope<span class="token operator">:</span> cdk<span class="token punctuation">.</span>Construct<span class="token punctuation">,</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> props<span class="token operator">?</span><span class="token operator">:</span> cdk<span class="token punctuation">.</span>StackProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>scope<span class="token punctuation">,</span> id<span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> thumbnailer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThumbnailingBucket</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"Thumbnailer"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">"lukstei-pictures2"</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">CfnOutput</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"SourceBucketUrl"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            description<span class="token operator">:</span> <span class="token string">"Source Bucket"</span><span class="token punctuation">,</span>
            value<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://s3.console.aws.amazon.com/s3/buckets/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>thumbnailer<span class="token punctuation">.</span>sourceBucket<span class="token punctuation">.</span>bucketName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">new</span> <span class="token class-name">CfnOutput</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"DestBucketUrl"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            description<span class="token operator">:</span> <span class="token string">"Destination Bucket"</span><span class="token punctuation">,</span>
            value<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://s3.console.aws.amazon.com/s3/buckets/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>thumbnailer<span class="token punctuation">.</span>destBucket<span class="token punctuation">.</span>bucketName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">new</span> <span class="token class-name">CfnOutput</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"LambdaOut"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            description<span class="token operator">:</span> <span class="token string">"Lambda ARN"</span><span class="token punctuation">,</span>
            value<span class="token operator">:</span> thumbnailer<span class="token punctuation">.</span>func<span class="token punctuation">.</span>functionArn
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The <code>CdkThumbnailServiceStack</code> class defines four constructs: our <code>ThumbnailingBucket</code>, which contains our main logic and the outputs that are used to output some values after the resources are created.</p>
<h4>Exploring, how tokens work</h4>
<p>Here we see an interesting thing: For the <code>LambdaOut</code> output, we are using <code>thumbnailer.func.functionArn</code> to reference the ARN of the Bucket. However, when our stack class is executed in the synthesizing step the ARN is not yet known since the resource is not yet created.</p>
<p>So how does that work? The answer is, the CDK uses so-called tokens to represent values that are not yet known. When we, for example, try to print out the <code>thumbnailer.func.functionArn</code> we will see something like <code>${Token[TOKEN.220]}</code>, which is how the tokens are represented internally. The nice thing about this concept is you can pass tokens around as if the actual value was already assigned.
When we look at the generated CloudFormation template, we see that our token was rendered as an intrinsic function, which will grab the ARN value of the referenced bucket:</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript"><span class="token comment">// ...</span>
<span class="token string">"LambdaOut"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">"Description"</span><span class="token operator">:</span> <span class="token string">"Bucket ARN"</span><span class="token punctuation">,</span>
  <span class="token string">"Value"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">"Fn::GetAtt"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"ThumbnailerresizerD404C058"</span><span class="token punctuation">,</span>
      <span class="token string">"Arn"</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The nice thing about that is that we dont even have to understand how it works internally, we can just use the value as if it was already assigned. It is even possible to do string concatenation with tokens, e.g. <code>thumbnailer.func.functionArn + " a string"</code>, which would render correctly.</p>
<h4>The ThumbnailingBucket construct</h4>
<p>As there is not much more interesting to see in <code>CdkThumbnailServiceStack</code>, lets look into the <code>ThumbnailingBucket</code> construct, which is located in <code>lib/ThumbnailingBucket.ts</code>:</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript"><span class="token comment">// ...</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ThumbnailingBucket</span> <span class="token keyword">extends</span> <span class="token class-name">Construct</span> <span class="token punctuation">{</span>
   <span class="token comment">// ...</span>

   <span class="token function">constructor</span><span class="token punctuation">(</span>scope<span class="token operator">:</span> Construct<span class="token punctuation">,</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> props<span class="token operator">:</span> ThumbnailingBucketProps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>scope<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>sourceBucket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">s3</span><span class="token punctuation">.</span><span class="token function">Bucket</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'sourceBucket'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            bucketName<span class="token operator">:</span> props<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
            removalPolicy<span class="token operator">:</span> RemovalPolicy<span class="token punctuation">.</span><span class="token constant">DESTROY</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>destBucket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">s3</span><span class="token punctuation">.</span><span class="token function">Bucket</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'destBucket'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            bucketName<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>sourceBucket<span class="token punctuation">.</span>bucketName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-thumbs</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            removalPolicy<span class="token operator">:</span> RemovalPolicy<span class="token punctuation">.</span><span class="token constant">DESTROY</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>We define our source and destination S3 buckets.</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript">        <span class="token keyword">this</span><span class="token punctuation">.</span>func <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">lambda_node</span><span class="token punctuation">.</span><span class="token function">NodejsFunction</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'resizer'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            bundling<span class="token operator">:</span> <span class="token punctuation">{</span>
                forceDockerBundling<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                nodeModules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'sharp'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            timeout<span class="token operator">:</span> Duration<span class="token punctuation">.</span><span class="token function">minutes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            memorySize<span class="token operator">:</span> <span class="token number">256</span><span class="token punctuation">,</span>
            functionName<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-resizer</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            runtime<span class="token operator">:</span> lambda<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span><span class="token constant">NODEJS_14_X</span><span class="token punctuation">,</span>
            environment<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token constant">DEST_BUCKET</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>destBucket<span class="token punctuation">.</span>bucketName
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>We define our lambda function.</p>
<p>Here we are using a special construct named <code>NodejsFunction</code>, which automatically bundles the specified JS/TS file and their dependencies into a <code>.zip</code> file, as required by Lambda. This has the advantage that we can define the lambda code in the same package as the CDK code. If this is not wanted we could use the <a href="https://docs.aws.amazon.com/cdk/api/latest/docs/aws-lambda-readme.html#aws-lambda-construct-library" target="_blank">vanilla Lambda <code>Function</code> construct</a>.</p>
<p>The source code of the lambda function is located in <code>lib/ThumbnailingBucket.resizer.ts</code>. To spare you the details of the lambda code, its function can be summarized on a high level as a function that downloads the file which is passed to our Lambda handler by the S3 notification trigger. It then generates thumbnails using the <code>sharp</code> library and uploads the generated files to the destination bucket.</p>
<p>In bundling we specify <code>forceDockerBundling</code> because our code depends on a library that uses native dependencies. When we prepare the Lambda <code>.zip</code>, which contains our lambda code + dependencies and use a Mac machine it would not work because the Node Package Manager will only download the Mac binaries. The Lambda is, however, executed on a Linux machine, so we can prepare the <code>.zip</code> inside a docker container that uses the same environment as Lambda and will therefore download the correct binaries.</p>
<p>In <code>environment</code> we pass the destination bucket name as a parameter, since it is not known beforehand. We could also pass tokens for unknown values here.</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript">        <span class="token punctuation">[</span><span class="token string">".jpg"</span><span class="token punctuation">,</span> <span class="token string">".jpeg"</span><span class="token punctuation">,</span> <span class="token string">".png"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>suffix <span class="token operator">=></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>sourceBucket<span class="token punctuation">.</span><span class="token function">addObjectCreatedNotification</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">s3notify</span><span class="token punctuation">.</span><span class="token function">LambdaDestination</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>func<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> suffix<span class="token operator">:</span> suffix <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>We set up notification triggers, which will call our lambda function when pictures are uploaded.</p>
<p>As we can see, it is possible to loop over an array and execute some CDK logic on it, as we would also in normal code do.</p>
<p>For all resource references we can just use normal variables, e.g. for the <code>LambdaDestination</code> we can pass the Lambda construct we created above. It would also be possible to reference already existing resources, e.g. for Lambdas with <code>const myExistingLambda = lambda.Function.fromFunctionArn("arn:aws:lambda:region:account-id:function:function-name")</code></p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript">        <span class="token keyword">this</span><span class="token punctuation">.</span>sourceBucket<span class="token punctuation">.</span><span class="token function">grantRead</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>destBucket<span class="token punctuation">.</span><span class="token function">grantWrite</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<p>The last thing we do is to grant the lambda function permissions to read from the source bucket and to grant write permissions to the destination bucket.
We can see its pretty easy to work with IAM permissions in CDK because we can use variables to reference resources and also use builtin logic like the <code>grantRead</code> method, which already knows which actions to grant.</p>
<p>The generated service role policy statement for the source bucket looks as expected:</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript"><span class="token string">"PolicyDocument"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span>
    <span class="token string">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token string">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"s3:GetObject*"</span><span class="token punctuation">,</span> <span class="token string">"s3:GetBucket*"</span><span class="token punctuation">,</span> <span class="token string">"s3:List*"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
        <span class="token string">"Resource"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">/* our source bucket */</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h3>Deploying our stack</h3>
<p>We can run the synthetization with <code>cdk synth</code> to see the generated CloudFormation template.
To deploy our stack we can run <code>cdk deploy</code>.</p>
<p>After it is deployed, we can put a test image into the source bucket and see the generated thumbnails in the destination bucket.
Seems to work just fine :-)</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/9439d08098be480f297d5dbc91c9d29e/c16e2/generated-pictures.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; margin-top: 4em; margin-bottom: 4em; max-width: 1300px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 43.07692307692307%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHuyE0hf//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEAAQUCX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAAIDAQAAAAAAAAAAAAAAAAABEBExIf/aAAgBAQABPyFUX0WQ9Ef/2gAMAwEAAgADAAAAEEzP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAgICAwAAAAAAAAAAAAAAABEBMSFBcYGh/9oACAEBAAE/EMSa1ZKIvSM7Pk32UlT/2Q=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="generated-pictures"
        title=""
        src="/static/9439d08098be480f297d5dbc91c9d29e/985be/generated-pictures.jpg"
        srcset="/static/9439d08098be480f297d5dbc91c9d29e/74459/generated-pictures.jpg 325w,
/static/9439d08098be480f297d5dbc91c9d29e/a1d47/generated-pictures.jpg 650w,
/static/9439d08098be480f297d5dbc91c9d29e/985be/generated-pictures.jpg 1300w,
/static/9439d08098be480f297d5dbc91c9d29e/4d0db/generated-pictures.jpg 1950w,
/static/9439d08098be480f297d5dbc91c9d29e/c16e2/generated-pictures.jpg 2444w"
        sizes="(max-width: 1300px) 100vw, 1300px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h3>Testing our stack</h3>
<p>We can unit-test our constructs just as any other code we normally write, e.g. with Jest.</p>
<p>In <code>test/ThumbnailingBucket.test.ts</code> we unit-test our construct:</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Stack <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@aws-cdk/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ThumbnailingBucket <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../lib/ThumbnailingBucket"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'@aws-cdk/assert/jest'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SynthUtils <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@aws-cdk/assert"</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'ThumbnailingBucket'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">ThumbnailingBucket</span><span class="token punctuation">(</span>stack<span class="token punctuation">,</span> <span class="token string">'Subject'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">"blog-pictures"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"defines exactly two buckets"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>stack<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toCountResources</span><span class="token punctuation">(</span><span class="token string">'AWS::S3::Bucket'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"sets the correct policies"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>SynthUtils<span class="token punctuation">.</span><span class="token function">subset</span><span class="token punctuation">(</span>stack<span class="token punctuation">,</span> <span class="token punctuation">{</span>resourceTypes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"AWS::IAM::Policy"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>It is possible to use special assertions for the generated template, e.g. <code>toCountResources</code>.</p>
<p>Snapshot testing is also supported, e.g. we snapshot the generated IAM policies to ensure they wont change without noticing.</p>
<p>One shortcoming of the snapshots is, that the generated template contains synthetic values, which depend on the order of the construct. When we move the of <code>grantWrite</code> call before the <code>grantRead</code> call, this will still generate a semantically equivalent policy, however the snapshot will fail because the synthetic ids changed. As of now, I could not find a better way to generate the snapshots, maybe this will change in the future.</p>
<h2>Conclusion</h2>
<p>In this article we created a serverless thumbnail service using the AWS CDK. </p>
<p>What I specifically like about this example is that it contains just the minimal amount of code nedded to express how a service should look like and behave - elegant and without any unnecessary indirections or overhead. I would also argue that even a developer without specific AWS or CloudFormation knowledge can understand what the service is doing by simply reading the code. </p></div><footer class="post-content-footer"></footer></article></div></main><footer class="site-foot"></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-75337739-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2021-11-21-creating-a-serverless-thumbnail-service-with-aws-cdk/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-da2faa6cda831d4af69f.js"],"app":["/app-4612523c4e7665fd5403.js"],"component---src-pages-404-js":["/component---src-pages-404-js-d4ead9f34b8bd40733d9.js"],"component---src-pages-about-js":["/component---src-pages-about-js-d5eb936168fe4e9bbf1c.js"],"component---src-pages-impressum-js":["/component---src-pages-impressum-js-878b5d49f4cec2b98e55.js"],"component---src-pages-index-js":["/component---src-pages-index-js-e99487282b602e1afcba.js"],"component---src-pages-posts-js":["/component---src-pages-posts-js-e4d9ff7d80d5708fc514.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-da42ae5d5d25f1f56248.js"]};/*]]>*/</script><script src="/polyfill-da2faa6cda831d4af69f.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-da42ae5d5d25f1f56248.js" async=""></script><script src="/93241701166c3169d92c9fdd395837837cace836-c1caf2270f19838e1a92.js" async=""></script><script src="/commons-6d5694db2e35908de204.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-4612523c4e7665fd5403.js" async=""></script><script src="/framework-305b3707783ccc9d7ca6.js" async=""></script><script src="/webpack-runtime-3393e4c65171b720585c.js" async=""></script></body></html>